function refreshChart(e,t,a){function r(e){delete d[e].createDate,delete d[e].updateDate,delete d[e].remarks,delete d[e].orderBy,delete d[e].filterId,delete d[e].filterCondition,delete n.qdFilterChilrdenList,delete n.createDate,delete n.updateDate,delete n.remarks,delete n.orderBy,delete n.filterOption,delete p.dataOption,delete p.createDate,delete p.updateDate,delete p.remarks,delete p.orderBy,delete p.staticOption}for(var i=getObjFromArr("nameId",SXarr,a),l=i.qdFilterChilrdenList,n=copyAndClear(i),d=copyAndClear(l),s=0;s<l.length;s++){if(""==l[s].wdId){if(!l[s].remarks)continue;l[s].remarks=!1;var o=l[s].componentId,p=copyAndClear(getObjFromArr("id",allOptions,o));r(s),p.qdFilterChilrden=null,p.qdFilter=null,p.chartName=allOptions[s].staticOption.staticType}else{var o=l[s].componentId,p=copyAndClear(getObjFromArr("id",allOptions,o));r(s),p.qdFilterChilrden=d[s],n.tempValue1=e,void 0!=t&&""!=t&&(n.tempValue2=t),p.qdFilter=n,p.chartName=allOptions[s].staticOption.staticType}var c=getDataFromAjax(ctx+"/qd/test/getDataoption",{qdDesignChildren:stringifyMore(p)});allOptions.forEach(function(e,t){if(e.id==o){var a=e;a.dataOption=c;var r=$("#"+canvasArray[t].id).parent(),i=$("#"+canvasArray[t].id).attr("class");$("#"+canvasArray[t].id).remove();var l=$('<div class="'+i+'" id="'+canvasArray[t].id+'" style="width:100%;height:100%;"></div>').appendTo(r);"yl1"==i?(void 0==YucanvasArray[t].chart&&null==YucanvasArray[t].chart||(YucanvasArray[t].chart.dispose(),YucanvasArray[t].chart=null),TBSC(a,canvasArray[t].id,l,YucanvasArray[t])):TBSC(a,canvasArray[t].id,l,canvasArray[t])}})}}function refresh(e){void 0!=refreshTimer&&clearInterval(refreshTimer),e>0&&(refreshTimer=setInterval(function(){canvasArray.forEach(function(e,t){if("echarts2"==allOptions[t].type||"echarts"==allOptions[t].type){var a=allOptions[t].staticOption.refreshTime||0;0==a&&rebulidFun(e,t,"echarts")}else if("countUp"==allOptions[t].type){var a=allOptions[t].staticOption.refreshTime||.2;0==a&&rebulidFun(e,t,"countUp")}})},1e3*e*60))}function independenceRefresh(e){var t=sxID;canvasArray.forEach(function(a,r){a.id==t&&(void 0!=a.refreshTimer&&clearInterval(a.refreshTimer),e>0&&(a.refreshTimer=setInterval(function(){var e=allOptions[r].type;rebulidFun(a,r,e)},1e3*e*60)))})}function rebulidFun(e,t,a){if(null!=allOptions[t].dims&&""!=allOptions[t].dims||null!=allOptions[t].measures&&""!=allOptions[t].measures){var r,i,l,n,d=allOptions[t].id;if(SXarr.forEach(function(e,t){e.qdFilterChilrdenList[0].componentId==d&&(r=e.tempValue1,i=e.tempValue2,n=e.nameId,""==e.tempValue1&&(dateTime=$(".JDDYdayinp").val(),r=dateTime))}),"table"==allOptions[t].chartType)var s=allOptions[t].dataOption.series[1].data+"";if(void 0!=r&&""!=r){for(var o=getObjFromArr("nameId",SXarr,n),p=o.qdFilterChilrdenList,c=copyAndClear(o),u=copyAndClear(p),m=0;m<p.length;m++)if(""!=p[m].wdId){var O=p[m].componentId,v=copyAndClear(getObjFromArr("id",allOptions,O));delete u[m].createDate,delete u[m].updateDate,delete u[m].remarks,delete u[m].orderBy,delete u[m].filterId,delete u[m].filterCondition,v.qdFilterChilrden=u[m],delete c.qdFilterChilrdenList,delete c.createDate,delete c.updateDate,delete c.remarks,delete c.orderBy,delete c.filterOption,c.tempValue1=r,void 0!=i&&""!=i&&(c.tempValue2=i),v.qdFilter=c,v.chartName=allOptions[t].staticOption.staticType,delete v.dataOption,delete v.createDate,delete v.updateDate,delete v.remarks,delete v.orderBy,delete v.staticOption,l=v,v.chartName=allOptions[t].staticOption.staticType}}else{var h=allOptions[t].id,y=copyAndClear(getObjFromArr("id",allOptions,h));delete y.dataOption,delete y.createDate,delete y.updateDate,delete y.remarks,delete y.orderBy,delete y.staticOption,y.chartName=allOptions[t].staticOption.staticType,l=y,y.chartName=allOptions[t].staticOption.staticType}var f=getDataFromAjax(ctx+"/qd/test/getDataoption",{qdDesignChildren:stringifyMore(l)});"table"==allOptions[t].chartType&&(newNum=f.series.length-1,f.series.forEach(function(e,t){e.data+""==s&&(newNum=t-1)})),allOptions[t].dataOption=f,rebulidElementFun(e,t,a)}else newNum=0,allOptions[t].dataOption=allOptions[t].staticOption.dataOption,rebulidElementFun(e,t,a),element=null}function rebulidElementFun(e,t,a){var r=$("#"+e.id).attr("class");if("echarts"==a){var i=$("#"+e.id).parent();$("#"+e.id).remove(),void 0==e.chart&&null==e.chart||(e.chart.dispose(),e.chart=null),clearInterval(e.timer);var l=$('<div class="'+r+'" id="'+e.id+'" style="width:100%;height:100%;"></div>').appendTo(i);"yl1"==r?TBSC(allOptions[t],e.id,l,YucanvasArray[t]):TBSC(allOptions[t],e.id,l,canvasArray[t]),newNum=0}else{var n;n=void 0!=allOptions[t].dataOption?allOptions[t].dataOption.series[0].subtextStyle.name:1e3*Math.random()+1,"yl1"==r?YucanvasArray[t].countUp.update(n):canvasArray[t].countUp.update(n)}}