function getRootPath(){curWwwPath=window.document.location.href,pathName=window.document.location.pathname,pos=curWwwPath.indexOf(pathName),localhostPaht=curWwwPath.substring(0,pos),projectName=pathName.substring(0,pathName.substr(1).indexOf("/")+1)}function srcSwitch(e){return e.indexOf(projectName)>-1?e:projectName+e}function screenInitialization(e){if($("#palette").css({width:"100%",height:"100%"}).perfectScrollbar(),$("html").css("font-size",100*multiple+"px"),"ratio1"==e.screen)adaptiveScreen();else if("ratio2"==e.screen)bigScreen(e);else{var t=navigator.userAgent,a=t.match(/(iPad).*OS\s([\d_]+)/),i=!a&&t.match(/(iPhone\sOS)\s([\d_]+)/),n=t.match(/(Android)\s+([\d.]+)/),r=i||n;r?(mobileScreen(innerWidth),$("#palette").perfectScrollbar("destroy"),$("#palette").css("overflow","auto")):$("#palette").css("overflow","hidden"),mobileScreen()}}function adaptiveScreen(){$(".fbl").addClass("hidden");var e=$("#palette").width()*multiple,t=Math.floor(9/16*e*scale);$("#content").css({width:e,height:t}),$("#HBgrid").css({width:e,height:t}),echartResize(canvasArray),scroll($("#palette"))}function bigScreen(e){$(".finput input:eq(0)").val(e.screenSize.width),$(".finput input:eq(1)").val(e.screenSize.height),$(".fbl").removeClass("hidden"),$("#content").css({width:e.screenSize.width*multiple,height:e.screenSize.height*scale*multiple}),$("#HBgrid").css({width:e.screenSize.width*multiple,height:e.screenSize.height*scale*multiple}),scroll($("#palette")),echartResize(canvasArray)}function mobileScreen(){$(".fbl").addClass("hidden");var e=$("#palette").height()*multiple,t=9/16*$("#palette").height(),a=t*multiple;$("#palette").css({width:Math.floor(t)}),$("#content").css({width:Math.floor(a),height:e*scale}),$("#HBgrid").css({width:Math.floor(a),height:e*scale}),echartResize(canvasArray),scroll($("#palette"))}function loadChart(e,t){for(var a=e.length,i=0;i<a;i++)e.forEach(function(e){if(e.orderBy==i){var t=parseMore(e.staticOption);if("{}"!=e.dataOption){if(null!=e.dataOption){var a=parseMore(e.dataOption);e.dataOption=a}else e.dataOption=t.dataOption||"";e.staticOption=t,allOptions.push(e)}}});divBuildFun(t)}function divBuildFun(e){canvasArray.forEach(function(e){void 0!=e.timer&&clearInterval(e.timer)}),canvasArray=[],allOptions.forEach(function(t,a){var i=t,n=t.type;z=a+1,atype="echarts"==n||"echarts2"==n?"echart":n,create(atype,i,e),sxID=null})}function create(e,t,a){var i=t.staticOption,n=i.position.top,r=i.position.left,s=i.boxSize.width,o=i.boxSize.height,c=i.boxId||"content";sxID=t.id;var l=$('<div id="box'+z+'"></div>').addClass("box").appendTo("#"+c);if(oBox.push(document.getElementById("box"+z)),oBoxcanshu(l,s,o,n,r),"check"!=a){var d=$('<div class="oneWayTB nResize" ></div>').appendTo(l),p=$('<div class="twoWay neResize" ></div>').appendTo(l),m=$('<div class="oneWayLR eResize" ></div>').appendTo(l),u=$('<div class="twoWay seResize" ></div>').appendTo(l),h=$('<div class="oneWayTB sResize" ></div>').appendTo(l),y=$('<div class="twoWay swResize" ></div>').appendTo(l),v=$('<div class="oneWayLR wResize" ></div>').appendTo(l),f=$('<div class="twoWay nwResize" ></div>').appendTo(l),g=$('<div class="border"></div>').appendTo(l);boxMove(l[0],g[0],"move"),boxMove(l[0],d[0],"n-resize"),boxMove(l[0],p[0],"ne-resize"),boxMove(l[0],m[0],"e-resize"),boxMove(l[0],u[0],"se-resize"),boxMove(l[0],h[0],"s-resize"),boxMove(l[0],y[0],"sw-resize"),boxMove(l[0],v[0],"w-resize"),boxMove(l[0],f[0],"nw-resize")}element=$('<a class="element" id="'+sxID+'"></a>').appendTo(l),canvasArray.push({id:t.id});var b=canvasArray.length-1;$("#"+sxID).parent().css("z-index",t.staticOption.zIndex),init(sxID,element,e,t,canvasArray[b],"editor")}function oBoxcanshu(e,t,a,i,n){e.width(t+"%"),e.height(a/scale+"%"),e[0].style.top=i/scale+"%",e[0].style.left=n+"%"}function init(e,t,a,i,n,r){switch(atype="echarts2"==a||"echarts"==a?"echart":a,$("."+e).remove(),atype){case"echart":var s=i.chartType,o=i.staticOption.chartOption;if("map"==s){"flyMap"==i.staticOption.staticType?(echartsMapCreatFun(o.geo.province||"","province",provincesList),o.geo.city&&echartsMapCreatFun(o.geo.city,"city",o.geo.cityList)):o.series.forEach(function(e,t){"map"==e.type&&(echartsMapCreatFun(e.province||"","province",provincesList),e.city&&echartsMapCreatFun(e.city,"city",e.cityList))})}TBSC(i,e,t,n);var c;void 0!=o.time||null!=o.time?(o.time.show?(c=o.time.longness,o.refreshTime=c):c=0,delete o.time):c=o.refreshTime||0,independenceRefresh(c),$('<li class="yuansuTU '+e+'" data-type="'+e+'"></a><i class="element_tubiao"></i><span>图表:</span><em>'+i.chartName+"</em></a></li>").appendTo($(".directory"));break;case"svg":$('<svg  xmlns="http://www.w3.org/2000/svg" version="1.1" x="0px" y="0px" preserveAspectRatio="none" style="width:100%;height:100%;" viewBox="0 0 36 36"  enable-background="new 0 0 36 36" xml:space="preserve">'+i.staticOption.path+"</svg>").appendTo(t),$('<li class="yuansuTU '+e+'" data-type="'+e+'"></a><i class="element_tuxin"></i><span>图形:</span><em>'+i.chartName+"</em></a></li>").appendTo($(".directory")),TXSXCSH($("#"+e),i.staticOption);break;case"tabs":tabScreat(i,t,e,n,r),$('<li class="yuansuTU '+e+'" data-type="'+e+'"></a><i class="element_tuxin"></i><span>tabs:</span><em>'+i.chartName+"</em></a></li>").appendTo($(".directory"));break;case"text":$('<textarea disabled="disabled" spellcheck="false" id="textarea'+z+'" placeholder="请输入文字">'+i.staticOption.content+"</textarea>").appendTo(t),$('<li class="yuansuTU '+e+'" data-type="'+e+'"></a><i class="element_wenben"></i><span>文本:</span><em>文本输入框</em></a></li>').appendTo($(".directory")),WBSXCSH($("#"+e),i.staticOption);break;case"time":$('<div class="otherBox"></div>').appendTo(t);timeRebuild(t,i.staticOption),$('<li class="yuansuTU '+e+'"></a><i class="element_time"></i><span>时间:</span><em>日期时间框</em></a></li>').appendTo($(".directory")),TMSXCSH(t,i.staticOption);break;case"weather":$('<div class="otherBox"></div>').appendTo(t);timeRebuild(t,i.staticOption),$('<li class="yuansuTU '+e+'"></a><i class="element_time"></i><span>天气:</span><em>天气框</em></a></li>').appendTo($(".directory")),TMSXCSH(t,i.staticOption);break;case"countUp":countUpFun(i,e,t,n);var c=i.staticOption.refreshTime||.2;independenceRefresh(c),$('<li class="yuansuTU '+e+'"></a><i class="element_time"></i><span>翻牌:</span><em>数字翻牌器</em></a></li>').appendTo($(".directory"));break;case"img":iDcreat(i,t),$('<li class="yuansuTU '+e+'"></a><i class="element_img"></i><span>图片:</span><em>图片框</em></a></li>').appendTo($(".directory"));break;case"video":vDcreat(i,t,e),$('<li class="yuansuTU '+e+'"></a><i class="element_img"></i><span>视频:</span><em>视频框</em></a></li>').appendTo($(".directory"));break;case"audio":aDcreat(i,t),$('<li class="yuansuTU '+e+'"></a><i class="element_img"></i><span>音频:</span><em>音频框</em></a></li>').appendTo($(".directory"));break;case"monitoring":mTcreat(i,t),$('<li class="yuansuTU '+e+'"></a><i class="element_img"></i><span>监控:</span><em>监控框</em></a></li>').appendTo($(".directory"));break;case"shaixuan":SXarr.forEach(function(a){a.id==i.id&&(a.nameId=e,$('<li class="yuansuTU'+sxID+'"></a><i class="element_shaixuan"></i><span>筛选:</span><em>'+i.chartName+"</em></a></li>").appendTo($(".directory")),SXCJ(a,t,sxID))}),SXSXCSH(sxID,i.staticOption)}}function tabScreat(e,t,a,i,n){var r=$('<ul class="tabsTitle"></ul>').appendTo(t),s=$('<ul class="tabsBody"></ul>').appendTo(t),o=e.staticOption.tabsList,c=o.length,l=100/c+"%";o.forEach(function(e,t){$('<li data="'+e.id+'" style="width:'+l+'"><p class="tabTitle">'+e.name+"</p></li>").appendTo(r);var a=$('<li id="'+e.id+'" class="tabBox"></li>').appendTo(s);$('<ol class="rightFunction"><li class="compile"></li><li class="copy"></li><li class="up"></li><li class="down"></li><li class="shut"></li></ol>').appendTo(a)});var d=Number(e.staticOption.tabIndex||0);tabSelectedFun(d,a),r.children("li").click(function(){var t=$(this).attr("data");tabsId=t,o.forEach(function(i,n){i.id==t&&(objectCompletion(e.staticOption,n,"tabIndex","string"),tabSelectedFun(n,a))})});var p=Number(e.staticOption.time||0);void 0!=n&&tabSwitchFun(p,d,c,a,i)}function tabSwitchFun(e,t,a,i,n){clearInterval(n.timer),e>0&&(n.timer=setInterval(function(){t++,t>=a&&(t=0),tabSelectedFun(t,i)},1e3*e))}function tabSelectedFun(e,t){canvasArray.forEach(function(a,i){a.id==t&&(tabSelectde($("#"+t).children(".tabsTitle").children(),"unselected",allOptions[i].staticOption),tabSelectde($($("#"+t).children(".tabsTitle").children()[e]),"selected",allOptions[i].staticOption),tabBodySelectde($("#"+t).children(".tabsBody"),allOptions[i].staticOption))}),$("#"+t).children(".tabsBody").children().css("opacity",0),$($("#"+t).children(".tabsBody").children()[e]).css("opacity",1)}function iDcreat(e,t){var a=e.staticOption.src;a=e.staticOption.src,$("<img/>").attr("src",a).width("100%").height("100%").appendTo(t),TPSXCSH(t,e.staticOption)}function vDcreat(e,t,a){var i=e.staticOption.src,n=e.staticOption.repeat,r=e.staticOption.autostart;if(i.indexOf("http")>-1)i=i.split("&auto")[0],$('<iframe src="'+i+'" frameborder=0 "allowfullscreen"></iframe>').width("100%").height("100%").appendTo(t);else{var s="p"+a;$('<div id="'+s+'"></div>').width("100%").height("100%").appendTo(t),jwplayer(s).setup({file:i,width:"100%",height:"100%",repeat:n,autostart:r,"logo.hide":!0})}TPSXCSH(t,e.staticOption)}function aDcreat(e,t){var a=$("#audioControls").html(),i=e.staticOption.src;t.html(a),new SMusic({musicList:i,autoPlay:!0,defaultMode:1,callback:function(e){}}),ADSXCSH(t,e.staticOption)}function mTcreat(e,t){rtmpSrc="rtmp://rtmp.open.ys7.com/openlive/f01018a141094b7fa138b9d0b856507b",hlsSrc="http://hls.open.ys7.com/openlive/f01018a141094b7fa138b9d0b856507b.m3u8";var a="myPlayer"+z;$('<video id="'+a+'" poster="" controls playsInline webkit-playsinline autoplay><source src="'+rtmpSrc+'" type="rtmp/flv" /><source src="'+hlsSrc+'" type="application/x-mpegURL" /></video>').width("100%").height("100%").appendTo(t),new EZUIPlayer(a)}function TBSC(e,t,a,i){function n(){if(void 0!=i){var e=c.animate||0;e>0&&tableAnimate(i,u,e)}}var r=e.chartType,s=e.staticOption.staticType,o=(e.chartName,e.type),c=$.extend(!0,{},e.dataOption,e.staticOption.chartOption);if("table"==r){var l=$('<div class="title"></div>').appendTo(a);$('<a class="text" target="view_window"></a>').appendTo(l),$('<a class="subtext" target="view_window"></a>').appendTo(l);var d=$('<div class="grid"></div>').appendTo(a),p=$('<ul class="head" style="text-align: center; width:100%;"></ul>').appendTo(d),m=$('<div class="tbBodyBox"></div>').appendTo(d),u=$('<ul class="tbBody" style="text-align: center"></ul>').appendTo(m),h=$('<div class="sfbnbody"></div>').appendTo(m),y=c.show||!1,v=c.showNum||10,f=c.interject;if(f=null==f?1:f,y)var g=2,b=[];else var g=0,b=[];var T;c.series[0].data.forEach(function(e,t){if("超链接"==e)T=t,b.push("");else{var a=e.length;b.push(a),g+=a}});var w,S=0;if(c.series.forEach(function(n,r){if(0==r){var o=$('<li class="header" style="height:100%;"></li>').appendTo(p);y&&$("<div><span>序号</span></div>").css("width",200/g+"%").appendTo(o),n.data.forEach(function(n,r){if(T!=r){var s=b[r]/g*100+"%";$('<div title="'+n+'"><span>'+n+"</span></div>").css({width:s,cursor:"pointer"}).appendTo(o).click(function(n){var r=o.children("div").index($(this));sorting(e,"",r,t,a,i)})}})}else{if("table"==s?w=u:(S>=v&&(S=0),0==S&&(w=$('<div class="paging"></div>').appendTo(u),$('<div class="sfbn"></div>').appendTo(h))),(r+1)%2==0)if(r<=newNum)var c=$('<li class="idol tableInterject"></li><').appendTo(w);else var c=$('<li class="idol"></li>').appendTo(w);else if(r<=newNum)var c=$('<li class="odd tableInterject"></li>').appendTo(w);else var c=$('<li class="odd"></li>').appendTo(w);var l=$('<a class="tableHref"></a>').appendTo(c);y&&$('<div title="'+r+'"><span>'+r+"</span></div>").css("width",200/g+"%").appendTo(l),n.data.forEach(function(e,t){if(T==t)l.attr("href",e);else{var a=b[t]/g*100+"%";if("null"!=e){var i=Number(e)+"";"NaN"==i&&(i=e)}else i="";$('<div title="'+i+'"><span>'+i+"</span></div>").css("width",a).appendTo(l)}}),S++}}),"table"==s)if(m.css("overflow","hidden"),$(".tableInterject").css("animation","tBam "+f+"s linear 0s 1"),$(".tableInterject").length>0)var x=setTimeout(function(){$(".tableInterject").css("animation","none"),$(".tableInterject").removeClass("tableInterject"),n(),clearTimeout(x)},1e3*f);else n();else u.css("height","100%"),function(e,t,a){function i(){if(void 0!=e){var t=c.animate||0;t>0&&(e.timer=setInterval(function(){r>=l&&(r=0),n(r)},1e3*t))}}function n(e){t.children(".shufflingShow").addClass("shufflingHide").removeClass("shufflingShow"),a.children(".sfbnClick").removeClass("sfbnClick"),o.eq(e).addClass("sfbnClick"),s.eq(e).addClass("shufflingShow").removeClass("shufflingHide"),r++}var r=0,s=t.children(".paging"),o=a.children(".sfbn"),l=s.length;n(0),i(),o.click(function(){clearInterval(e.timer),r=$(this).index(),n(r),i()})}(i,u,h);shufflingBtnFun(c,h),special(c,t),tableSeriesArrFun(c,t,!0),tetbBackfun(c,t),myChart=null}else if("GIS"==r)require.config({paths:{baiduGis:["http://api.map.baidu.com/getscript?v=2.0&ak=59KkG4gGSwIzukAsZmfBsp6Y13j6D9LM&services=&t=20171031174121"]}}),require(["baiduGis"],function(){$(function(){myChart=null,creatMap(t,c,i)})});else if("text"==r){var l=$('<div class="title"></div>').appendTo(a);$('<a class="text" target="view_window"></a>').appendTo(l),$('<a class="subtext" target="view_window"></a>').appendTo(l);var d=$('<div class="grid"></div>').appendTo(a);c.series.forEach(function(e,t){var a=$('<div class="series'+t+' series"></div>').appendTo(d);$('<p class="prefixes"><span class="textName"></span></p>').appendTo(a),$('<p class="content"><span class="data">'+e.subtextStyle.name+"</span></p>").appendTo(a),$('<p class="suffix"><span class="unit" ></s></p>').appendTo(a)}),myChart=null,special(c,t),textSeriesArrFun(c,t),tetbBackfun(c,t)}else myChart="echarts2"==o?echarts2.init(document.getElementById(t),theme):echarts.init(document.getElementById(t),theme),myChart.setOption(c),void 0!=i&&(i.chart=myChart),myChart.on("click",function(e){var t=c.href;""!=t&&null!=t&&(t.indexOf("qd/qdDesign")>-1&&(t=ctx+t),"self"==c.target?window.location.href=t:window.open(t))})}function sorting(e,t,a,i,n,r){var s=e.dims,o=e.measures;if(""!=s||""!=o){var c=e.designId,l=s.split(","),d=o.split(","),p=l.concat(d),m=p[a],u={childrenId:c,fieldId:m,orderbyType:"asc",index:a,sort:1};if(e.qdOrderbys){e.qdOrderbys[0].fieldId==m&&("asc"==e.qdOrderbys[0].orderbyType?u.orderbyType="desc":u.orderbyType="asc")}e.qdOrderbys=[],e.qdOrderbys.unshift(u);var h={};h.designId=c,h.dbsrcId=e.dbsrcId,h.sourceType=e.sourceType,h.tableId=e.tableId,h.dims=e.dims,h.measures=e.measures,h.chartType=e.chartType,h.chartName=e.staticOption.staticType,h.type=e.type,h.qdOrderBys=e.qdOrderbys;var y=getDataFromAjax(ctx+"//qd/qdDesign/getDataoption",{qdDesignChildren:stringifyMore(h)});e.dataOption=y,n.children().remove(),TBSC(e,i,n,r)}}function creatMap(e,t,a){function i(e,t){t.addEventListener("click",function(e){e.target.getPosition()}),t.addEventListener("onmouseover",function(t){var a=t.target,i=a.getPosition();infoWindow=new BMap.InfoWindow(e,r),n.openInfoWindow(infoWindow,i)}),t.addEventListener("onmouseout",function(e){n.closeInfoWindow(infoWindow)})}var n=new BMap.Map(e);n.centerAndZoom(new BMap.Point(t.center.lng,t.center.lat),t.zoom),n.enableScrollWheelZoom(!0);var r={width:250,height:80,title:"信息窗口",enableMessage:!0};t.series.forEach(function(e){var t=new BMap.Marker(new BMap.Point(e[0],e[1]));t.setAnimation(BMAP_ANIMATION_DROP);var a=e[2];n.addOverlay(t),i(a,t)}),a.map=n;var s=t.mapTypes,o=t.mapStyle;GISmapFun(n,s,"mapTypes"),GISmapFun(n,o,"mapStyle")}function GISmapFun(e,t,a){if("mapTypes"==a)"BMAP_NORMAL_MAP"==t?e.setMapType(BMAP_NORMAL_MAP):"BMAP_SATELLITE_MAP"==t?e.setMapType(BMAP_SATELLITE_MAP):"BMAP_HYBRID_MAP"==t?e.setMapType(BMAP_HYBRID_MAP):e.setMapType(BMAP_PERSPECTIVE_MAP);else if("mapStyle"==a){var i={style:t};e.setMapStyle(i)}}function GISmap(e){canvasArray.forEach(function(t){t.id==sxID&&void 0!=t.map&&t.map.centerAndZoom(new BMap.Point(e.center.lng,e.center.lat),e.zoom)})}function timecsh(e,t){var a=["星期一","星期二","星期三","星期四","星期五","星期六","星期日"],i=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];switch(dateFormatFun(new Date),e){case"0":t.html(year+"-"+month+"-"+day+" "+hour+":"+minute+":"+second);break;case"1":t.html(year+"-"+month+"-"+day+" "+Hour+":"+minute+":"+second);break;case"2":t.html(year+"年"+month+"月"+day+"日 "+hour+":"+minute+":"+second);break;case"3":t.html(year+"年"+month+"月"+day+"日 "+Hour+":"+minute+":"+second);break;case"4":t.html(year+"-"+month+"-"+day);break;case"5":t.html(year+"年"+month+"月"+day+"日");break;case"6":t.html(hour+":"+minute+":"+second);break;case"7":t.html(Hour+":"+minute+":"+second);break;case"8":t.html(year+"年"+month+"月"+day+"日"+i[weeks]);break;case"9":t.html(year+"年"+month+"月"+day+"日"+a[weeks])}}function dateFormatFun(e){year=e.getFullYear(),month=addZero(e.getMonth()+1),day=addZero(e.getDate()),Hour=addZero(e.getHours()),hour=addZero(Hour%12==0?12:Hour%12),minute=addZero(e.getMinutes()),second=addZero(e.getSeconds()),weeks=e.getDay()-1}function addZero(e){return e<10&&(e="0"+e),e}function timeRebuild(e,t){clearInterval(t.timer);var a=t.styleVal||"0";timecsh(a,e.children()),t.timer=setInterval(function(){timecsh(a,e.children())},1e3)}function countUpFun(e,t,a,i){var n=e.staticOption,r=e.dataOption||"",s=haveValue(n,"prefixName","string")||haveValue(r,"series.0.textStyle.name","string")||"",o=haveValue(n,"suffixName","string")||"";$('<div class="otherBox"><span class="prefix">'+s+'</span><span class="content" id="ch'+t+'"></span><span class="suffix">'+o+"</span></div>").appendTo(a);var c={useEasing:!0,useGrouping:!0,separator:",",decimal:"."},l=haveValue(r,"series.0.subtextStyle.name","string")||1e3,d=((l+"").split(".")[1]||"").length,p=n.duration||2.5,m=n.decimals||d||0,u=new CountUp("ch"+t,0,l,m,p||2.5,c);void 0!=i&&(i.countUp=u),u.start(),CPSXCSH($("#"+t),e.staticOption)}function SXCJ(e,t,a){t.children().remove();var i=$('<div style="width:100%;height:100%;"></div>').appendTo(t);$('<p class="SXboxp"></p>').appendTo(i);var n=$('<div class="SXboxdiv"></div>').appendTo(i);if("date"==e.type){var r=e.remarks;"range"!=e.dateType?("dateTimePicker"==r?n.html('<el-date-picker style="width: 100%" v-model="date" type="datetime" placeholder="选择日期时间" @change="dateFun(date)"></el-date-picker>'):"datePicker"==r?n.html('<el-date-picker style="width: 100%" v-model="date" type="date" placeholder="选择日期" @change="dateFun(date)"></el-date-picker>'):n.html('<el-time-picker style="width: 100%" v-model="date" placeholder="选择时间" @change="dateFun(date)"></el-time-picker>'),new Vue({el:"#"+a,data:function(){return{date:e.absValue}},methods:{dateFun:function(e){void 0!=e&&""!=e&&(dateFormatFun(e),e=dateFormat(r)),SXarr.forEach(function(t){t.nameId==a&&(t.tempValue1=e)}),refreshChart(e,void 0,a)}}})):("dateTimePicker"==r?n.html('<el-date-picker style="width: 100%" v-model="daterange" type="datetimerange" placeholder="选择日期时间范围" @change="dateRangeFun(daterange)"></el-date-picker>'):"datePicker"==r?n.html('<el-date-picker style="width: 100%" v-model="daterange" type="daterange" placeholder="选择日期范围" @change="dateRangeFun(daterange)"></el-date-picker>'):n.html('<el-time-picker style="width: 100%" v-model="daterange" placeholder="选择时间范围" @change="dateRangeFun(daterange)"></el-time-picker>'),new Vue({el:"#"+a,data:function(){return{daterange:[e.beginDate,e.endDate]}},methods:{dateRangeFun:function(e){var t,i;void 0!=e&&""!=e[0]&&null!=e[0]&&(dateFormatFun(e[0]),t=dateFormat(),dateFormatFun(e[1]),i=dateFormat(datePickerType)),SXarr.forEach(function(e){e.nameId==a&&(e.tempValue1=t,e.tempValue1=i)}),refreshChart(t,i,a)}}}))}else"text"==e.type?n.html('<el-input v-model="acquiescence" :spellcheck="false" placeholder="请输入筛选值" @blur="selectChange(acquiescence)"></el-input>'):n.html('<el-select v-model="acquiescence" placeholder="请选择筛选值" clearable  style="width:100%;" @change="selectChange(acquiescence)"><el-option v-for="(item, i) in qdtList" :key="i" :label="item" :value="item"></el-option></el-select>'),new Vue({el:"#"+a,data:function(){return{acquiescence:e.absValue,qdtList:e.filterOption.filterCondition}},methods:{selectChange:function(e){SXarr.forEach(function(t){t.nameId==a&&(t.tempValue1=e)}),refreshChart(e,void 0,a)}}});"range"==e.dateType?refreshChart(item.beginDate,item.endDate,a):refreshChart(e.absValue,void 0,a)}function dateFormat(e){return bval="timePicker"==e?Hour+":"+minute+":"+second:"datePicker"==e?year+"-"+month+"-"+day:year+"-"+month+"-"+day+" "+Hour+":"+minute+":"+second}function scroll(e){e.scrollTop(0),e.scrollLeft(0),e.perfectScrollbar("update")}function htmlFontSize(e,t){$("html").css("font-size",e.width()/t),$(window).bind("resize",function(){$("html").css("font-size",e.width()/t)})}function echartResize(e){e.forEach(function(e,t){echartResizeFun(e,t)})}function echartResizeFun(e,t){if(null!=e.chart&&""!=e.chart)e.chart.resize();else{var a=allOptions[t].type;if("echarts"==a){var i=allOptions[t].chartType;"table"!=i&&"text"!=i||("text"==i?emFontSiz(e.id,3.5):tableLineFun(allOptions[t].staticOption.chartOption,e.id),titleWidth(e.id),gridWidthFun(e.id,0))}else if("countUp"==a);else if("time"==a);else if("monitoring"==a){var n=$("#"+e.id);n.empty(),mTcreat(allOptions[t],n)}else"tabs"==a&&tabsResize(t)}}function tabsResize(e){allOptions[e].staticOption.tabsList.forEach(function(e,t){var a=e.id;allOptions.forEach(function(e,t){""!=e&&e.staticOption.boxId==a&&echartResizeFun(canvasArray[t],t)})})}function echartsMapCreatFun(e,t,a){a.forEach(function(a,i){a.cityName==e&&echartsMapFun(e,a.url,t)})}function echartsMapFun(e,t,a){$.ajaxSettings.async=!1,$.getJSON(t,function(t){echarts.registerMap(e,t),"province"==a&&(cityList=mapListFun(t,"geometryCouties"))})}function mapListFun(e,t){var a=[],i=!0;return e.features.forEach(function(e,n){var r=e.properties.id+"";if("geometryCouties"==t){if(r.length<5)"3682"==r||r.indexOf("66")>-1?(a=[],i=!1):"3681"==r?(a=[],i=!1):r+="00";else{var s=r.substring(0,4);i&&("1101"==s||"1201"==s||"3101"==s?(a.push({cityName:"市辖区",url:"./import/mapdata/"+t+"/"+s+"00.json"}),i=!1):"5001"==s?(a.push({cityName:"市辖区",url:"./import/mapdata/"+t+"/"+s+"01.json"},{cityName:"市辖县",url:"./import/mapdata/"+t+"/"+s+"02.json"}),i=!1):"4690"==s&&(a.push({cityName:"省直辖县级行政区划",url:"./import/mapdata/"+t+"/"+s+"00.json"},{cityName:"南沙群岛",url:"./import/mapdata/"+t+"/460300.json"}),i=!1))}}i&&a.push({cityName:e.properties.name,url:"./import/mapdata/"+t+"/"+r+".json"})}),a}function copyAndClear(e){return parseMore(stringifyMore(e))}function stringifyMore(e){return JSON.stringify(e,function(e,t){return"function"==typeof t?t+"":t})}function parseMore(s){return JSON.parse(s,function(k,v){return null!=v&&v.indexOf&&v.indexOf("function")>-1?eval("(function(){return "+v+" })()"):v})}var allOptions=[],thisOption,z=0,tabsId,canvasArray=[],YucanvasArray=[],cc,dd,oo,oBox=[],SXarr=[],k,sxID,prevId,dbsxID,theme,HBSX,thisVal1,thisVal,refreshTimer,element,myChart,scale,dataUrl="",lineBOxHeight,newNum=0,cityList=[],qdOrderBys=[],ctx="http://172.16.70.49:8080/hlQD/page",curWwwPath,pathName,pos,localhostPaht,projectName;getRootPath();var year,month,day,hour,Hour,minute,second,weeks,provincesList=[{cityName:"北京市",url:"./import/mapdata/geometryProvince/11.json"},{cityName:"天津市",url:"./import/mapdata/geometryProvince/12.json"},{cityName:"河北省",url:"./import/mapdata/geometryProvince/13.json"},{cityName:"山西省",url:"./import/mapdata/geometryProvince/14.json"},{cityName:"内蒙古自治区",url:"./import/mapdata/geometryProvince/15.json"},{cityName:"辽宁省",url:"./import/mapdata/geometryProvince/21.json"},{cityName:"吉林省",url:"./import/mapdata/geometryProvince/22.json"},{cityName:"黑龙江省",url:"./import/mapdata/geometryProvince/23.json"},{cityName:"上海市",url:"./import/mapdata/geometryProvince/31.json"},{cityName:"江苏省",url:"./import/mapdata/geometryProvince/32.json"},{cityName:"浙江省",url:"./import/mapdata/geometryProvince/33.json"},{cityName:"安徽省",url:"./import/mapdata/geometryProvince/34.json"},{cityName:"福建省",url:"./import/mapdata/geometryProvince/35.json"},{cityName:"江西省",url:"./import/mapdata/geometryProvince/36.json"},{cityName:"山东省",url:"./import/mapdata/geometryProvince/37.json"},{cityName:"河南省",url:"./import/mapdata/geometryProvince/41.json"},{cityName:"湖北省",url:"./import/mapdata/geometryProvince/42.json"},{cityName:"湖南省",url:"./import/mapdata/geometryProvince/43.json"},{cityName:"广东省",url:"./import/mapdata/geometryProvince/44.json"},{cityName:"广西壮族自治区",url:"./import/mapdata/geometryProvince/45.json"},{cityName:"海南省",url:"./import/mapdata/geometryProvince/46.json"},{cityName:"重庆市",url:"./import/mapdata/geometryProvince/50.json"},{cityName:"四川省",url:"./import/mapdata/geometryProvince/51.json"},{cityName:"贵州省",url:"./import/mapdata/geometryProvince/52.json"},{cityName:"云南省",url:"./import/mapdata/geometryProvince/53.json"},{cityName:"西藏自治区",url:"./import/mapdata/geometryProvince/54.json"},{cityName:"陕西省",url:"./import/mapdata/geometryProvince/61.json"},{cityName:"甘肃省",url:"./import/mapdata/geometryProvince/62.json"},{cityName:"青海省",url:"./import/mapdata/geometryProvince/63.json"},{cityName:"宁夏回族自治区",url:"./import/mapdata/geometryProvince/64.json"},{cityName:"新疆维吾尔自治区",url:"./import/mapdata/geometryProvince/65.json"},{cityName:"台湾省",url:"./import/mapdata/geometryProvince/71.json"},{cityName:"香港特别行政区",url:"./import/mapdata/geometryProvince/81.json"},{cityName:"澳门特别行政区",url:"./import/mapdata/geometryProvince/82.json"}];echartsMapFun("china","./import/mapdata/china.json","china");