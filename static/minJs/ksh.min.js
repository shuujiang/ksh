function createGraphics(t){t.forEach(function(t){var i=t.text;$("<p></p>").text(t.text).appendTo($(".shape1"));var e=$("<div></div>").addClass("shape-box").addClass(t.name).appendTo($(".shape1"));t.data.forEach(function(t){var n=$("<i></i>").appendTo(e);$('<svg  xmlns="http://www.w3.org/2000/svg" version="1.1" style=" fill: rgb(117, 134, 151); width:100%;height:100%;line-height:100%;" >'+t.content+"</svg>").appendTo(n),clickTuxin(n,t.content,i)})})}function clickEcharts(t){thisOptionFun(t.type);var i=copyAndClear(t.dataOption),e=copyAndClear(t.option);thisOption.chartName=t.name,thisOption.chartType=t.chartType,thisOption.staticType=t.staticType,thisOption.dataOption=i,thisOption.staticOption={wdType:t.wdType,staticType:t.staticType,dataArticle:{order:"before",num:null,type:"article"},chartOption:e,dataOption:i,zIndex:10},"text"==thisOption.chartType?thisOption.staticOption.boxSize={width:25,height:25,moHeight:25}:thisOption.staticOption.boxSize={width:50,height:50,moHeight:50},thisOption.staticOption.position={top:0,left:0},boxCreate("echart")}function clickTuxin(t,i,e){t.click(function(){thisOptionFun("svg"),thisOption.chartName=e,thisOption.staticOption={path:i,zIndex:10},thisOption.staticOption.boxSize={width:17.19,height:13.89,moHeight:13.89},thisOption.staticOption.position={top:0,left:0},boxCreate("svg")})}function componentsFun(t){switch(thisOptionFun(t),t){case"tabs":tabsCreateFun(t);break;case"text":textreaFun(t);break;case"countUp":dealerFun(t);break;case"time":dateTimeFun(t);break;case"weather":weatherFun(t);break;case"img":bouncedHideFun(),$(".imgBox").show(),selContent.imgInitialValue("create");break;case"video":bouncedHideFun(),$(".videoBox").show(),selContent.videoInitialValue("create");break;case"audio":var i=!0;allOptions.forEach(function(t,e){"audio"==t.type&&(i=!1)}),i?(bouncedHideFun(),$(".audioBox").show(),selContent.audioInitialValue("create")):top.layer.alert("已有音频组件");break;case"monitoring":bouncedHideFun(),$(".monitoringBox").show(),selContent.monitoringInitialValue("create")}}function thisOptionFun(t){z++,prevId=sxID;var i=allOptions.length;thisOption={id:uuid(),type:t,dataOption:"",dims:"",measures:"",orderBy:i}}function boxCreate(t){if(void 0!=tabsId){if(thisOption.staticOption.boxId=tabsId,"tabs"==t)return void top.layer.alert("tabs组件中不能创建tabs组件")}else thisOption.staticOption.boxId="content";allOptions.push(thisOption),create(t,thisOption),pitchUp(sxID)}function bouncedHideFun(){$(".shujuSelect").show(),$(".selectBox").hide(),$(".monitoringBox").hide(),$(".videoBox").hide(),$(".audioBox").hide(),$(".imgBox").hide()}function tabsCreateFun(t){thisOption.chartName="tabs框",thisOption.staticOption={tabsList:[{name:"页面1",id:uuid(),option:[]},{name:"页面2",id:uuid(),option:[]}],unselected:{},select:{},zIndex:10},thisOption.staticOption.boxSize={width:50,height:50,moHeight:50},thisOption.staticOption.position={top:0,left:0},boxCreate(t)}function textreaFun(t){thisOption.chartName="文本",thisOption.staticOption={content:"",zIndex:10},thisOption.staticOption.boxSize={width:17.19,height:13.89,moHeight:13.89},thisOption.staticOption.position={top:0,left:0},boxCreate(t)}function dealerFun(t){thisOption.chartName="数字翻牌",thisOption.dataOption={series:[{textStyle:{name:""},subtextStyle:{name:1e3}}]},thisOption.dims="",thisOption.measures="",thisOption.staticOption={wdType:"not-one",boxSize:{width:17.19,height:13.89,moHeight:13.89},position:{top:0,left:0},zIndex:10},boxCreate(t)}function dateTimeFun(t){thisOption.chartName="时间",thisOption.staticOption={zIndex:10},thisOption.staticOption.boxSize={width:17.19,height:13.89,moHeight:13.89},thisOption.staticOption.position={top:0,left:0},boxCreate(t)}function weatherFun(t){thisOption.chartName="天气",thisOption.staticOption={zIndex:10},thisOption.staticOption.boxSize={width:17.19,height:13.89,moHeight:13.89},thisOption.staticOption.position={top:0,left:0},boxCreate(t)}function imgCreate(t){t?(thisOption.staticOption={src:t,zIndex:10},thisOption.staticOption.boxSize={width:17.19,height:13.89,moHeight:13.89},thisOption.staticOption.position={top:0,left:0},thisOption.chartName="图片",boxCreate("img"),$(".shujuSelect").hide()):top.layer.alert("请选择图片")}function imgEditor(t){$(".shujuSelect").hide(),canvasArray.forEach(function(i,e){if(i.id==sxID){var n=$("#"+sxID);n.children().remove(),allOptions[e].staticOption.src=t,iDcreat(allOptions[e],n)}})}function videoCreate(){""!=videoHref&&void 0!=videoHref&&"http://"!=videoHref?(thisOption.chartName="视频",thisOption.staticOption={src:videoHref,repeat:"always",autostart:!0,zIndex:10},thisOption.staticOption.boxSize={width:50,height:50,moHeight:50},thisOption.staticOption.position={top:0,left:0},$(".shujuSelect").hide(),videoHref="",boxCreate("video")):top.layer.alert("请选择视频")}function videoEditor(){""!=videoHref&&void 0!=videoHref&&"http://"!=videoHref?(canvasArray.forEach(function(t,i){t.id==sxID&&(allOptions[i].staticOption.src=videoHref,$("#"+sxID).children().remove(),vDcreat(allOptions[i],$("#"+sxID),sxID))}),pitchUp(sxID),$(".shujuSelect").hide()):top.layer.alert("请选择视频")}function audioCreate(t){t.length>0?(thisOption.staticOption={src:t,zIndex:10},thisOption.staticOption.boxSize={width:37.5,height:19.44,moHeight:19.44},thisOption.staticOption.position={top:0,left:0},thisOption.chartName="视频",boxCreate("audio"),$(".shujuSelect").hide()):top.layer.alert("请选择音频")}function audioEditor(t){$(".shujuSelect").hide(),canvasArray.forEach(function(i,e){if(i.id==sxID){var n=$("#"+sxID);n.children().remove(),allOptions[e].staticOption.src=t,aDcreat(allOptions[e],n)}})}function monitoringCreate(t,i){""!=i?(thisOption.staticOption={hlsSrc:"http://"+t,rtmpSrc:"rtmp://"+i,zIndex:10},thisOption.staticOption.boxSize={width:50,height:50,moHeight:50},thisOption.staticOption.position={top:0,left:0},thisOption.chartName="监控",boxCreate("monitoring"),$(".shujuSelect").hide()):top.layer.alert("请输入rtmp地址")}function monitoringEditor(t,i){""!=i?(canvasArray.forEach(function(e,n){if(e.id==sxID){var a=$("#"+sxID);a.empty(),allOptions[n].staticOption.hlsSrc="http://"+t,allOptions[n].staticOption.rtmpSrc="http://"+i,mTcreat(allOptions[n],a)}}),$(".shujuSelect").hide()):top.layer.alert("请输入rtmp地址")}function SXcreate(){SXcsh.id="sx"+uuid1(),SXarr.push(SXcsh),thisOptionFun("shaixuan"),thisOption.id=SXcsh.id,thisOption.chartName="数据筛选器",thisOption.staticOption={title:{name:SXname},zIndex:10},thisOption.staticOption.boxSize={width:17.19,height:13.89,moHeight:13.89},thisOption.staticOption.position={top:0,left:0},boxCreate("shaixuan")}function SXeditor(){SXCJ(SXcsh,$("#"+sxID),sxID),SXarr.forEach(function(t,i){t.id==sxID&&(SXarr[i]=SXcsh)}),canvasArray.forEach(function(t,i){t.id==sxID&&(allOptions[i].staticOption.title.name=SXname,SXSXCSH(sxID,allOptions[i].staticOption))}),pitchUp(sxID)}function audioclick(t){if(t.length>0){z++,prevId=sxID;var i={},e=allOptions.length;i.orderBy=e,i.id=uuid(),i.type="audio",i.staticOption={src:t,zIndex:10},i.staticOption.boxSize={width:50,height:13.89,moHeight:13.89},i.staticOption.position={top:0,left:0},i.chartName="视频",i.dataOption="",i.dims="",i.measures="",allOptions.push(i),create("audio",50,13.89,0,0,13.89,i),pitchUp(sxID),$(".shujuSelect").hide()}else top.layer.alert("请选择音频")}function monitoringFun(t,i){if(""!=t&&""!=i){z++,prevId=sxID;var e={},n=allOptions.length;e.orderBy=n,e.id=uuid(),e.type="monitoring",e.staticOption={hlsSrc:"http://"+t,rtmpSrc:"rtmp://"+i,zIndex:10},e.staticOption.boxSize={width:50,height:50,moHeight:50},e.staticOption.position={top:0,left:0},e.chartName="监控",e.dataOption="",e.dims="",e.measures="",allOptions.push(e),create("monitoring",50,50,0,0,50,e),pitchUp(),$(".shujuSelect").hide()}else top.layer.alert("请输入完整地址")}function pitchUp(t){scroll($(".basisSet")),scroll($(".directory")),$(".shuxing").addClass("hidden"),$("#"+prevId).siblings().filter(".border").removeClass("borHover1"),t?(allTabListFun(),canvasArray.forEach(function(i,e){if(i.id==t){var n=allOptions[e].type,a=$("#"+t).parent().siblings(".rightFunction").show();switch(olPlace(allOptions[e].staticOption.position.left,allOptions[e].staticOption.boxSize.width,allOptions[e].staticOption.position.top,a),$(".compile").css("display","none"),$(".copy").css("display","none"),atype="echarts2"==n||"echarts"==n?"echart":n,atype){case"echart":$(".copy").css("display","block"),$(".compile").css("display","block"),$(".tubiaoshuxing").removeClass("hidden"),$(".TabsName").each(function(t,i){$(i).children(".TabsBox").hide(),$(i).children(".TabsNameText").css("border-bottom-color","rgba(0,0,0,0)").addClass("TabsNameClick").removeClass("TabsNameClick1")});var o=allOptions[e].staticOption.chartOption.Tabsfrist||"general";tabsSelected(o,"frist"),chartArrVue(o),VueChartattr.initialValue(allOptions[e],o);break;case"svg":$(".tuxinshuxing").removeClass("hidden"),svgInitial&&svgInitializationFun(),$(".copy").css("display","block"),VueGraphicattr.initialValue(allOptions[e].staticOption),svgInitial=!1;break;case"tabs":$(".tabsshuxing").removeClass("hidden"),tabsInitial&&(tabsInitializationFun(),tabsInitial=!1),$(".copy").css("display","block"),VueTabsattr.initialValue(allOptions[e].staticOption);break;case"text":$(".wenbenshuxing").removeClass("hidden"),textInitial&&(textInitializationFun(),textInitial=!1),$(".copy").css("display","block"),VueTextattr.initialValue(allOptions[e].staticOption);break;case"shaixuan":$(".shaixuanshuxing").removeClass("hidden"),shaixuanInitial&&(shaixuanInitializationFun(),shaixuanInitial=!1),VueFilterattr.initialValue(allOptions[e].staticOption);break;case"time":$(".timeshuxing").removeClass("hidden"),timeInitial&&(timeInitializationFun(),timeInitial=!1),VueTimeattr.initialValue(allOptions[e].staticOption);break;case"countUp":$(".countUpshuxing").removeClass("hidden"),$(".copy").css("display","block"),$(".compile").css("display","block"),countUpInitial&&(countUpInitializationFun(),countUpInitial=!1),VueCountUpattr.initialValue(allOptions[e].staticOption);break;case"img":$(".tupianshuxing").removeClass("hidden"),$(".copy").css("display","block"),imgInitial&&(imgInitializationFun(),imgInitial=!1),VuePictureattr.initialValue(allOptions[e].staticOption);break;case"video":$(".videoshuxing").removeClass("hidden"),$(".copy").css("display","block"),videoInitial&&(videoInitializationFun(),videoInitial=!1),VueVideoattr.initialValue(allOptions[e].staticOption);break;case"audio":$(".audioshuxing").removeClass("hidden"),audioInitial&&(audioInitializationFun(),audioInitial=!1),VueAudioattr.initialValue(allOptions[e].staticOption);break;case"monitoring":$(".monitoringshuxing").removeClass("hidden"),monitoringInitial&&(monitoringInitializationFun(),monitoringInitial=!1),VueMonitoringattr.initialValue(allOptions[e].staticOption)}$("#"+t).siblings().filter(".border").addClass("borHover1")}})):($(".rightFunction").css("display","none"),$(".huabushuxing").removeClass("hidden"))}function allTabListFun(){allTabList=[{value:"content",label:"画布"}],allOptions.forEach(function(t,i){""!=t&&"tabs"==t.type&&t.staticOption.tabsList.forEach(function(i,e){allTabList.push({value:i.id,label:t.chartName+t.orderBy+" "+i.name})})})}function olPlace(t,i,e,n){parseInt($("html").css("font-size"));n.css("right",100-(t+i)+"%"),n.css("top",e/scale+"%")}function elementDeteFun(t){-1!=sxID.indexOf("time")&&clearInterval(allOptions[t].staticOption.timer),SXarr.forEach(function(i,e){i.id==allOptions[t].id&&(SXarr.baoremove(e),i.qdFilterChilrdenList.forEach(function(t,i){if(""!=t.wdId){var e=t.componentId;allOptions.forEach(function(t,i){if(t.id==e){var n=canvasArray[i].id;if($("#"+n).remove(),"ratio3"!=HBSX.screen)var a=$('<div class="element" id="'+n+'"></div>').appendTo(oBox[i]);else var a=$('<div class="element" id="'+n+'"></div>').appendTo(mooBox[i]);var o={dbsrcId:t.dbsrcId,designId:t.designId,dims:t.dims,tableId:t.tableId,sourceType:t.sourceType,measures:t.measures,id:t.id,type:t.type,chartName:t.chartName,chartType:t.chartType},s=getDataFromAjax(ctx+"/qd/test/getDataoption",{qdDesignChildren:stringifyMore(o)});t.dataOption=s,TBSC(t,n,a,canvasArray[i])}})}}))}),canvasArray.baoremove(t),allOptions.baoremove(t),$(oBox[t]).remove(),oBox.baoremove(t),$(".yuansuTU."+sxID).remove(),$("#rightFunction").css("display","none"),pitchUp(void 0)}function shuzuBJ(t,i){var e=t.toUpperCase(),n=[];i.forEach(function(t){n.push(stringifyMore(t))});var a=n.unique1();return n=[],a.forEach(function(t){n.push(JSON.parse(t)[e])}),n}function uuid(){for(var t=[],i="0123456789abcdef",e=0;e<32;e++)t[e]=i.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=i.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23],t.join("")}function uuid1(){for(var t=[],i="0123456789abcdef",e=0;e<30;e++)t[e]=i.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=i.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23],t.join("")}function boxMove(t,i,e){new Drag(t,{handle:i},e)}function Drag(){this.initialize.apply(this,arguments)}$(".details-zhong").click(function(t){if(prevId=sxID,"rightFunction"!=$(t.target).parent().attr("class")){sxID=$(t.target).siblings(".element").attr("id");var i=$(t.target).attr("class"),e=$(t.target).parent().parent().attr("class");if(("screen"==i||"screen"==e)&&void 0!=tabsId){$(".border").show(),$(".scal").show();var n=$("#"+tabsId).parents(".element").attr("id");canvasArray.forEach(function(t,i){if(t.id==n){var e=allOptions[i].staticOption.tabsList.length,a=Number(haveValue(allOptions[i].staticOption,"tabIndex","Number")||0);objectCompletion(allOptions[i].staticOption,!1,"editor","boolean");var o=Number(allOptions[i].staticOption.time||0);tabSwitchFun(o,a,e,n,t)}}),tabsId=void 0}pitchUp(sxID)}void 0!=dbsxID&&canvasArray.forEach(function(t,i){t.id==dbsxID&&$("#"+dbsxID).parent().css("z-index",allOptions[i].staticOption.zIndex)})}),$(".details-zhong").dblclick(function(t){dbsxID=$(t.target).siblings(".element").attr("id"),$(t.target).parent().css("z-index",22222)}),$(document).on("click",".yuansuTU",function(){sxID=$(this).attr("data-type"),pitchUp(sxID)});var svgInitial=!0,tabsInitial=!0,textInitial=!0,shaixuanInitial=!0,timeInitial=!0,countUpInitial=!0,imgInitial=!0,videoInitial=!0,audioInitial=!0,monitoringInitial=!0;$(document).on("click",".shut",function(){canvasArray.forEach(function(t,i){t.id==sxID&&("tabs"==allOptions[i].type&&allOptions[i].staticOption.tabsList.forEach(function(t,i){allOptions.forEach(function(i,e){""!=i&&t.id==i.staticOption.boxId&&elementDeteFun(e)})}),elementDeteFun(i))})}),$(document).on("click",".up",function(){var t=$("#"+sxID).parent().css("z-index");t++,$("#"+sxID).parent().css("z-index",t),canvasArray.forEach(function(i,e){i.id==sxID&&(allOptions[e].staticOption.zIndex=t)})}),$(document).on("click",".down",function(){var t=$("#"+sxID).parent().css("z-index");t>1&&(t--,$("#"+sxID).parent().css("z-index",t),canvasArray.forEach(function(i,e){i.id==sxID&&(allOptions[e].staticOption.zIndex=t)}))}),$(document).on("click",".copy",function(){prevId=sxID;var t,i=uuid();canvasArray.forEach(function(e,n){if(e.id==sxID){z++;var a=allOptions[n].type;atype="echarts"==a||"echarts2"==a?"echart":a;var o=copyAndClear(allOptions[n]);t=o.id,o.id=i,o.orderBy=z-1;var s=100/HBSX.HXshu,h=100/HBSX.ZXshu,r=allOptions[n].staticOption.position.top,p=allOptions[n].staticOption.position.left,c=allOptions[n].staticOption.boxSize.width,l=allOptions[n].staticOption.boxSize.height,d=allOptions[n].staticOption.boxSize.moHeight;bTop=r+l+s<=100?r+s:r-s>=0?r-s:r,bleft=p+l+h<=100?p+h:p-h>=0?p-h:p,o.staticOption.position.top=bTop,o.staticOption.position.left=bleft,o.staticOption.position.width=c,o.staticOption.position.height=l,o.staticOption.position.moHeight=d,allOptions.push(o),create(atype,o),pitchUp(sxID)}}),SXarr.forEach(function(e,n){e.qdFilterChilrdenList.forEach(function(e,a){if(e.componentId==t){var o=copyAndClear(e);o.componentId=i,SXarr[n].qdFilterChilrdenList.splice(a,0,o)}})})}),$(document).on("click",".compile",function(){canvasArray.forEach(function(t,i){if(t.id==sxID){$(".ksh1").toggleClass("hidden"),$(".ksh2").toggleClass("hidden");var e=$("<div></div>").addClass("aBox").appendTo("._graph"),n=$('<div class="element" id="_echart" style="width:100%;height:100%;"></div>').appendTo(e);olDoption=copyAndClear(allOptions[i]);var a=allOptions[i].type;setTimeout(function(){_eachEcharts("_echart",n),"echarts"==a||"echarts2"==a?(TBSC(olDoption,"_echart",n),featureSet(olDoption)):countUpFun(olDoption,"_echart",n)},200),refresh(0)}})}),Array.prototype.baoremove=function(t){if(isNaN(t)||t>this.length)return!1;this.splice(t,1,"")},Array.prototype.unique1=function(){for(var t=[this[0]],i=1;i<this.length;i++){for(var e=!1,n=0;n<t.length;n++)if(this[i]==t[n]){e=!0;break}e||t.push(this[i])}return t};var newTop,newLeft,newHeight,newWidth,maxTop,maxLeft,maxHeight,maxHeightmin,maxWidth,maxWidthmin;Drag.prototype={initialize:function(t,i,e){this.drag=this.$(t),this._x=this._y=0,this._moveDrag=this.bind(this,this.moveDrag),this._stopDrag=this.bind(this,this.stopDrag),this.setOptions(i),this.handle=this.$(this.options.handle),this.handle.style.cursor=e,this.type=e,this.addHandler(this.handle,"mousedown",this.bind(this,this.startDrag))},startDrag:function(t){var i=$(this.drag).parent();cc=i.height(),dd=i.width(),k=oBox.indexOf(this.drag),newTop=allOptions[k].staticOption.position.top/scale,newLeft=allOptions[k].staticOption.position.left,newHeight=allOptions[k].staticOption.boxSize.height/scale,newWidth=allOptions[k].staticOption.boxSize.width,maxTop=100-newHeight,maxLeft=100-newWidth,maxHeight=100-newTop,maxWidth=100-newLeft,maxHeightmin=newTop+newHeight,maxWidthmin=newWidth+newLeft,this.top=newTop,this.left=newLeft,this.height=newHeight,this.width=newWidth;var t=t||window.event;this._x=t.clientX,this._y=t.clientY,this.addHandler(document,"mousemove",this._moveDrag),this.addHandler(document,"mouseup",this._stopDrag),this.handle.setCapture&&this.handle.setCapture()},moveDrag:function(t){var t=t||window.event;switch(YY=(t.clientY-this._y)/cc*100,XX=(t.clientX-this._x)/dd*100,this.type){case"move":newTop=YY+this.top,newLeft=XX+this.left,newTop<0&&(newTop=0),newTop>maxTop&&(newTop=maxTop),newLeft<0&&(newLeft=0),newLeft>maxLeft&&(newLeft=maxLeft),this.drag.style.top=newTop+"%",this.drag.style.left=newLeft+"%";var i=$(this.handle).parent().siblings(".rightFunction");olPlace(newLeft,this.width,newTop*scale,i);break;case"n-resize":newHeight=1*(this.height-YY),newTop=YY+this.top,newHeight<0&&(newHeight=0),newHeight>maxHeightmin&&(newHeight=maxHeightmin),newTop<0&&(newTop=0);var i=$(this.handle).parent().siblings(".rightFunction");olPlace(this.left,this.width,newTop*scale,i),$(this.drag).height(newHeight+"%"),this.drag.style.top=newTop+"%";break;case"ne-resize":newHeight=1*(this.height-YY),newWidth=1*(XX+this.width),newTop=YY+this.top,newHeight<0&&(newHeight=0),newHeight>maxHeightmin&&(newHeight=maxHeightmin),newWidth<0&&(newWidth=0),newWidth>maxWidth&&(newWidth=maxWidth),newTop<0&&(newTop=0);var i=$(this.handle).parent().siblings(".rightFunction");olPlace(this.left,newWidth,newTop*scale,i),$(this.drag).height(newHeight+"%"),$(this.drag).width(newWidth+"%"),this.drag.style.top=newTop+"%";break;case"e-resize":newWidth=1*(XX+this.width),newWidth<0&&(newWidth=0),newWidth>maxWidth&&(newWidth=maxWidth);var i=$(this.handle).parent().siblings(".rightFunction");olPlace(this.left,newWidth,this.top*scale,i),$(this.drag).width(newWidth+"%");break;case"se-resize":newHeight=1*(YY+this.height),newWidth=1*(XX+this.width),newHeight<0&&(newHeight=0),newHeight>maxHeight&&(newHeight=maxHeight),newWidth<0&&(newWidth=0),newWidth>maxWidth&&(newWidth=maxWidth);var i=$(this.handle).parent().siblings(".rightFunction");olPlace(this.left,newWidth,this.top*scale,i),$(this.drag).height(newHeight+"%"),$(this.drag).width(newWidth+"%");break;case"s-resize":newHeight=1*(YY+this.height),newHeight<0&&(newHeight=0),newHeight>maxHeight&&(newHeight=maxHeight);var i=$(this.handle).parent().siblings(".rightFunction");olPlace(this.left,this.width,this.top*scale,i),$(this.drag).height(newHeight+"%"),$(this.drag).width(newWidth+"%");break;case"sw-resize":newHeight=1*(YY+this.height),newWidth=1*(this.width-XX),newLeft=XX+this.left,newHeight<0&&(newHeight=0),newHeight>maxHeight&&(newHeight=maxHeight),newWidth<0&&(newWidth=0),newWidth>maxWidthmin&&(newWidth=maxWidthmin),newLeft<0&&(newLeft=0);var i=$(this.handle).parent().siblings(".rightFunction");olPlace(newLeft,newWidth,this.top*scale,i),$(this.drag).height(newHeight+"%"),$(this.drag).width(newWidth+"%"),this.drag.style.left=newLeft+"%";break;case"w-resize":newWidth=1*(this.width-XX),newLeft=XX+this.left,newWidth<0&&(newWidth=0),newWidth>maxWidthmin&&(newWidth=maxWidthmin),newLeft<0&&(newLeft=0);var i=$(this.handle).parent().siblings(".rightFunction");olPlace(newLeft,newWidth,this.top*scale,i),$(this.drag).height(newHeight+"%"),$(this.drag).width(newWidth+"%"),this.drag.style.left=newLeft+"%";break;case"nw-resize":newHeight=1*(this.height-YY),newWidth=1*(this.width-XX),newTop=YY+this.top,newLeft=XX+this.left,newHeight<0&&(newHeight=0),newHeight>maxHeight&&(newHeight=maxHeight),newWidth<0&&(newWidth=0),newWidth>maxWidthmin&&(newWidth=maxWidthmin),newLeft<0&&(newLeft=0);var i=$(this.handle).parent().siblings(".rightFunction");olPlace(newLeft,newWidth,newTop*scale,i),$(this.drag).height(newHeight+"%"),$(this.drag).width(newWidth+"%"),this.drag.style.top=newTop+"%",this.drag.style.left=newLeft+"%"}t.preventDefault&&t.preventDefault()},stopDrag:function(){switch(this.type){case"move":allOptions[k].staticOption.position.top=newTop*scale,allOptions[k].staticOption.position.left=newLeft;break;case"n-resize":echartResizeFun(canvasArray[k],k),allOptions[k].staticOption.boxSize.height=newHeight*scale,allOptions[k].staticOption.position.top=newTop*scale;break;case"ne-resize":echartResizeFun(canvasArray[k],k),allOptions[k].staticOption.boxSize.height=newHeight*scale,allOptions[k].staticOption.boxSize.width=newWidth,allOptions[k].staticOption.position.top=newTop*scale;break;case"e-resize":echartResizeFun(canvasArray[k],k),allOptions[k].staticOption.boxSize.width=newWidth;break;case"se-resize":echartResizeFun(canvasArray[k],k),allOptions[k].staticOption.boxSize.height=newHeight*scale,allOptions[k].staticOption.boxSize.width=newWidth;break;case"s-resize":echartResizeFun(canvasArray[k],k),allOptions[k].staticOption.boxSize.height=newHeight*scale;break;case"sw-resize":echartResizeFun(canvasArray[k],k),allOptions[k].staticOption.boxSize.height=newHeight*scale,allOptions[k].staticOption.boxSize.width=newWidth,allOptions[k].staticOption.position.left=newLeft;break;case"w-resize":echartResizeFun(canvasArray[k],k),allOptions[k].staticOption.boxSize.width=newWidth,allOptions[k].staticOption.position.left=newLeft;break;case"nw-resize":echartResizeFun(canvasArray[k],k),allOptions[k].staticOption.boxSize.height=newHeight*scale,allOptions[k].staticOption.boxSize.width=newWidth,allOptions[k].staticOption.position.top=newTop*scale,allOptions[k].staticOption.position.left=newLeft}this.removeHandler(document,"mousemove",this._moveDrag),this.removeHandler(document,"mouseup",this._stopDrag),this.handle.releaseCapture&&this.handle.releaseCapture()},setOptions:function(t){this.options={handle:this.drag};for(var i in t)this.options[i]=t[i]},$:function(t){return"string"==typeof t?document.getElementById(t):t},addHandler:function(t,i,e){return t.addEventListener?t.addEventListener(i,e,!1):t.attachEvent("on"+i,e)},removeHandler:function(t,i,e){return t.removeEventListener?t.removeEventListener(i,e,!1):t.detachEvent("on"+i,e)},bind:function(t,i){return function(){return i.apply(t,arguments)}}};